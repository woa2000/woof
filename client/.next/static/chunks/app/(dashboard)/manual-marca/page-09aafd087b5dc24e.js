(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[948],{1849:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});let r=(0,t(7982).A)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]])},2262:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});let r=(0,t(7982).A)("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},2699:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});let r=(0,t(7982).A)("sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]])},3060:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});let r=(0,t(7982).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},3385:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});let r=(0,t(7982).A)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},3896:(e,a,t)=>{Promise.resolve().then(t.bind(t,5229))},5229:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>_});var r=t(3365),s=t(1521),l=t(8676),n=t(3060),i=t(9703),c=t(5842),d=t(6414),o=t(2699),u=t(6296),m=t(7982);let x=(0,m.A)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]);var h=t(2262),p=t(7310),g=t(3385);let b=(0,m.A)("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);var y=t(5515),f=t(6309),j=t(7591),v=t(7521);function N(e){let{status:a}=e,t={draft:i.A,published:c.A,archived:d.A}[a];return(0,r.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-md text-xs font-medium border ".concat({draft:"bg-yellow-100 text-yellow-800 border-yellow-200",published:"bg-green-100 text-green-800 border-green-200",archived:"bg-gray-100 text-gray-800 border-gray-200"}[a]),children:[(0,r.jsx)(t,{className:"w-3 h-3"}),{draft:"Rascunho",published:"Publicado",archived:"Arquivado"}[a]]})}function w(e){let{manual:a,onView:t,onEdit:l,onDuplicate:n,onDelete:i,onShare:c}=e,[d,u]=(0,s.useState)(!1),m=a.manual_data.chapters.filter(e=>"complete"===e.completion_status).length,x=a.manual_data.chapters.length,h=Math.round(m/x*100),p=(e=>{switch(e){case"ai_extraction":return{icon:o.A,label:"IA",color:"text-purple-600 bg-purple-100"};case"manual":return{icon:g.A,label:"Manual",color:"text-blue-600 bg-blue-100"};case"hybrid":return{icon:b,label:"H\xedbrido",color:"text-green-600 bg-green-100"};default:return{icon:g.A,label:"Manual",color:"text-gray-600 bg-gray-100"}}})(a.creation_method),w=p.icon;return(0,r.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 hover:shadow-lg hover:border-blue-200 transition-all duration-200 group relative",children:["published"===a.status&&(0,r.jsx)("div",{className:"absolute top-3 right-3 w-0 h-0 border-l-[20px] border-l-transparent border-t-[20px] border-t-green-500"}),(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsx)(N,{status:a.status}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("button",{onClick:()=>u(!d),className:"p-2 hover:bg-gray-100 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity",title:"Mais op\xe7\xf5es",children:(0,r.jsx)(y.A,{className:"w-4 h-4"})}),d&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"fixed inset-0 z-10",onClick:()=>u(!1)}),(0,r.jsxs)("div",{className:"absolute right-0 mt-1 w-48 bg-white rounded-lg shadow-lg border border-gray-200 py-1 z-20",children:[(0,r.jsxs)("button",{onClick:()=>{t(a.id),u(!1)},className:"w-full px-4 py-2 text-left text-sm hover:bg-gray-50 flex items-center gap-2",children:[(0,r.jsx)(f.A,{className:"w-4 h-4"}),"Visualizar"]}),(0,r.jsxs)("button",{onClick:()=>{l(a.id),u(!1)},className:"w-full px-4 py-2 text-left text-sm hover:bg-gray-50 flex items-center gap-2",children:[(0,r.jsx)(g.A,{className:"w-4 h-4"}),"Editar"]}),(0,r.jsxs)("button",{onClick:()=>{n(a.id),u(!1)},className:"w-full px-4 py-2 text-left text-sm hover:bg-gray-50 flex items-center gap-2",children:[(0,r.jsx)(b,{className:"w-4 h-4"}),"Duplicar"]}),(0,r.jsxs)("button",{onClick:()=>{c(a.id),u(!1)},className:"w-full px-4 py-2 text-left text-sm hover:bg-gray-50 flex items-center gap-2",children:[(0,r.jsx)(j.A,{className:"w-4 h-4"}),"Compartilhar"]}),(0,r.jsx)("hr",{className:"my-1"}),(0,r.jsxs)("button",{onClick:()=>{i(a.id),u(!1)},className:"w-full px-4 py-2 text-left text-sm hover:bg-red-50 text-red-600 flex items-center gap-2",children:[(0,r.jsx)(v.A,{className:"w-4 h-4"}),"Excluir"]})]})]})]})]}),(0,r.jsxs)("div",{className:"cursor-pointer",onClick:()=>t(a.id),children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2 hover:text-blue-600 transition-colors",children:a.brand_name}),(0,r.jsx)("p",{className:"text-gray-600 text-sm mb-4 line-clamp-2 min-h-[2.5rem]",children:a.description||"Manual da marca criado para padronizar a identidade visual e comunica\xe7\xe3o digital."}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-600 mb-2",children:[(0,r.jsx)("span",{children:"Progresso dos cap\xedtulos"}),(0,r.jsxs)("span",{className:"font-medium",children:[m,"/",x]})]}),(0,r.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,r.jsx)("div",{className:"h-2 rounded-full transition-all duration-300 ".concat(100===h?"bg-green-500":h>=75?"bg-blue-500":h>=50?"bg-yellow-500":"bg-gray-400"),style:{width:"".concat(h,"%")}})}),(0,r.jsxs)("div",{className:"text-right text-xs text-gray-500 mt-1",children:[h,"% completo"]})]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500 mb-3",children:[(0,r.jsxs)("div",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-md ".concat(p.color),children:[(0,r.jsx)(w,{className:"w-3 h-3"}),(0,r.jsx)("span",{className:"font-medium",children:p.label})]}),(0,r.jsx)("span",{title:new Date(a.updated_at).toLocaleString("pt-BR"),children:(e=>{let a=new Date(e),t=Math.ceil(Math.abs(new Date().getTime()-a.getTime())/864e5);return 1===t?"Hoje":2===t?"Ontem":t<=7?"".concat(t," dias atr\xe1s"):a.toLocaleDateString("pt-BR")})(a.updated_at)})]}),a.tags&&a.tags.length>0&&(0,r.jsxs)("div",{className:"flex flex-wrap gap-1",children:[a.tags.slice(0,2).map((e,a)=>(0,r.jsx)("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded-md hover:bg-gray-200 transition-colors",children:e},a)),a.tags.length>2&&(0,r.jsxs)("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded-md",children:["+",a.tags.length-2," mais"]})]})]}),(0,r.jsx)("div",{className:"absolute bottom-4 right-4 opacity-0 group-hover:opacity-100 transition-opacity",children:(0,r.jsxs)("div",{className:"flex gap-1",children:[(0,r.jsx)("button",{onClick:e=>{e.stopPropagation(),l(a.id)},className:"p-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 shadow-lg",title:"Editar manual",children:(0,r.jsx)(g.A,{className:"w-3 h-3"})}),(0,r.jsx)("button",{onClick:e=>{e.stopPropagation(),t(a.id)},className:"p-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 shadow-lg",title:"Visualizar manual",children:(0,r.jsx)(f.A,{className:"w-3 h-3"})})]})})]})}function k(e){let{title:a,value:t,color:s="default",icon:l}=e,n={default:"text-gray-900",green:"text-green-600",yellow:"text-yellow-600",blue:"text-blue-600",red:"text-red-600",purple:"text-purple-600"};return(0,r.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 p-4 hover:shadow-md transition-shadow duration-200",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-2xl font-bold ".concat(n[s]),children:t.toLocaleString("pt-BR")}),(0,r.jsx)("div",{className:"text-sm text-gray-600",children:a})]}),l&&(0,r.jsx)("div",{className:"".concat(n[s]," opacity-70"),children:l})]})})}var A=t(1849);let M=(0,m.A)("link-2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]);function C(e){let{isOpen:a,onClose:t,onCreateManual:l}=e,[n,i]=(0,s.useState)("manual"),[c,d]=(0,s.useState)(""),[u,m]=(0,s.useState)(""),[x,p]=(0,s.useState)([]),[g,b]=(0,s.useState)(""),[y,f]=(0,s.useState)([]),[j,v]=(0,s.useState)([]),[N,w]=(0,s.useState)("");if(!a)return null;let k=()=>{g.trim()&&!x.includes(g.trim())&&(p([...x,g.trim()]),b(""))},C=()=>{N.trim()&&!j.includes(N.trim())&&(v([...j,N.trim()]),w(""))};return(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-hidden",children:[(0,r.jsxs)("div",{className:"p-6 border-b border-gray-200",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold",children:"Criar Novo Manual da Marca"}),(0,r.jsx)("p",{className:"text-gray-600 mt-1",children:"Escolha como deseja criar seu manual da marca"})]}),(0,r.jsxs)("div",{className:"p-6 overflow-y-auto max-h-[60vh]",children:[(0,r.jsxs)("div",{className:"flex space-x-1 bg-gray-100 rounded-lg p-1 mb-6",children:[(0,r.jsxs)("button",{onClick:()=>i("manual"),className:"flex-1 flex items-center justify-center gap-2 py-2 px-4 rounded-md text-sm font-medium transition-colors ".concat("manual"===n?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"),children:[(0,r.jsx)(h.A,{className:"w-4 h-4"}),"Cria\xe7\xe3o Manual"]}),(0,r.jsxs)("button",{onClick:()=>i("ai"),className:"flex-1 flex items-center justify-center gap-2 py-2 px-4 rounded-md text-sm font-medium transition-colors ".concat("ai"===n?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"),children:[(0,r.jsx)(o.A,{className:"w-4 h-4"}),"Extra\xe7\xe3o por IA"]})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome da Marca *"}),(0,r.jsx)("input",{type:"text",value:c,onChange:e=>d(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ex: Minha Empresa"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descri\xe7\xe3o"}),(0,r.jsx)("textarea",{value:u,onChange:e=>m(e.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Breve descri\xe7\xe3o do manual..."})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tags"}),(0,r.jsxs)("div",{className:"flex gap-2 mb-2",children:[(0,r.jsx)("input",{type:"text",value:g,onChange:e=>b(e.target.value),onKeyPress:e=>"Enter"===e.key&&(e.preventDefault(),k()),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Adicionar tag..."}),(0,r.jsx)("button",{onClick:k,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200",children:"Adicionar"})]}),x.length>0&&(0,r.jsx)("div",{className:"flex flex-wrap gap-1",children:x.map((e,a)=>(0,r.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded",children:[e,(0,r.jsx)("button",{onClick:()=>p(x.filter((e,t)=>t!==a)),className:"hover:text-blue-600",children:"\xd7"})]},a))})]}),"ai"===n&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Upload de Arquivos"}),(0,r.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-blue-400 transition-colors",children:[(0,r.jsx)(A.A,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),(0,r.jsxs)("p",{className:"text-sm text-gray-600 mb-2",children:["Arraste arquivos aqui ou"," ",(0,r.jsxs)("label",{className:"text-blue-600 hover:text-blue-700 cursor-pointer underline",children:["clique para selecionar",(0,r.jsx)("input",{type:"file",multiple:!0,accept:".pdf,.jpg,.jpeg,.png,.doc,.docx",className:"hidden",onChange:e=>{e.target.files&&f(Array.from(e.target.files))}})]})]}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"PDF, imagens, documentos (m\xe1x. 10MB cada)"})]}),y.length>0&&(0,r.jsx)("div",{className:"mt-2 space-y-1",children:y.map((e,a)=>(0,r.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-600 p-2 bg-gray-50 rounded",children:[(0,r.jsx)("span",{className:"truncate",children:e.name}),(0,r.jsx)("button",{onClick:()=>f(y.filter((e,t)=>t!==a)),className:"text-red-500 hover:text-red-700 ml-2",children:"\xd7"})]},a))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"URLs de Refer\xeancia"}),(0,r.jsxs)("div",{className:"flex gap-2 mb-2",children:[(0,r.jsx)("input",{type:"url",value:N,onChange:e=>w(e.target.value),onKeyPress:e=>"Enter"===e.key&&(e.preventDefault(),C()),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"https://exemplo.com"}),(0,r.jsx)("button",{onClick:C,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200",children:(0,r.jsx)(M,{className:"w-4 h-4"})})]}),j.length>0&&(0,r.jsx)("div",{className:"space-y-1",children:j.map((e,a)=>(0,r.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-600 p-2 bg-gray-50 rounded",children:[(0,r.jsx)("span",{className:"truncate",children:e}),(0,r.jsx)("button",{onClick:()=>v(j.filter((e,t)=>t!==a)),className:"text-red-500 hover:text-red-700 ml-2",children:"\xd7"})]},a))})]})]})]})]}),(0,r.jsxs)("div",{className:"p-6 border-t border-gray-200 flex justify-end gap-3",children:[(0,r.jsx)("button",{onClick:()=>{d(""),m(""),p([]),b(""),f([]),v([]),w(""),i("manual"),t()},className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200",children:"Cancelar"}),(0,r.jsx)("button",{onClick:()=>{if(!c.trim())return;let e={brand_name:c,description:u,tags:x,..."ai"===n&&{files:y,urls:j}};l("ai"===n?"ai_extraction":"manual",e),d(""),m(""),p([]),b(""),f([]),v([]),w(""),i("manual"),t()},disabled:!c.trim(),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"ai"===n?"Processar com IA":"Criar Manual"})]})]})})}function _(){let{manuals:e,userStats:a,loading:t,error:m,fetchUserManuals:g,createManual:b,duplicateManual:y,deleteManual:f,generateShareLink:j,getUserStats:v,resetError:N}=(0,p.R)(),[A,M]=(0,s.useState)(!1),[_,E]=(0,s.useState)(""),[D,S]=(0,s.useState)("all");(0,s.useEffect)(()=>{g(),v()},[g,v]);let z=e.filter(e=>{var a;let t=e.brand_name.toLowerCase().includes(_.toLowerCase())||(null==(a=e.description)?void 0:a.toLowerCase().includes(_.toLowerCase())),r="all"===D||e.status===D;return t&&r}),L=async(e,a)=>{await b({brand_name:a.brand_name,description:a.description,creation_method:e,tags:a.tags||[]})},q=e=>{window.open("/manual-marca/".concat(e),"_blank")},B=e=>{window.location.href="/manual-marca/".concat(e,"/editar")},P=async e=>{confirm("Deseja duplicar este manual?")&&await y(e)},R=async e=>{confirm("Tem certeza que deseja excluir este manual? Esta a\xe7\xe3o n\xe3o pode ser desfeita.")&&await f(e)},H=async e=>{let a=await j(e);a&&(navigator.clipboard.writeText(a),alert("Link de compartilhamento copiado!"))};return(0,r.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8",children:[(0,r.jsx)("div",{className:"mb-8",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("h1",{className:"text-3xl font-bold text-gray-900 flex items-center",children:[(0,r.jsx)(l.A,{className:"w-8 h-8 text-orange-500 mr-3"}),"Manual da Marca"]}),(0,r.jsx)("p",{className:"text-gray-600 mt-1",children:"Crie e gerencie manuais de marca para padronizar sua identidade visual e comunica\xe7\xe3o digital"})]}),(0,r.jsx)("div",{className:"flex space-x-3",children:(0,r.jsxs)("button",{onClick:()=>M(!0),className:"px-4 py-2 bg-gradient-to-r from-orange-500 to-red-500 text-white rounded-lg hover:from-orange-600 hover:to-red-600 flex items-center gap-2 shadow-lg",children:[(0,r.jsx)(n.A,{className:"w-4 h-4"}),"Novo Manual"]})})]})}),m&&(0,r.jsx)("div",{className:"mb-6",children:(0,r.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4",children:(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)(i.A,{className:"w-5 h-5 text-red-600 shrink-0"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-red-800",children:"Erro encontrado"}),(0,r.jsx)("p",{className:"text-sm text-red-700 mt-1",children:m})]}),(0,r.jsx)("button",{onClick:N,className:"ml-auto text-red-500 hover:text-red-700",children:"\xd7"})]})})}),a&&(0,r.jsx)("div",{className:"mb-8",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,r.jsx)(k,{title:"Total de Manuais",value:a.total_manuals,color:"default",icon:(0,r.jsx)(l.A,{className:"w-6 h-6"})}),(0,r.jsx)(k,{title:"Publicados",value:a.published_count,color:"green",icon:(0,r.jsx)(c.A,{className:"w-6 h-6"})}),(0,r.jsx)(k,{title:"Rascunhos",value:a.draft_count,color:"yellow",icon:(0,r.jsx)(d.A,{className:"w-6 h-6"})}),(0,r.jsx)(k,{title:"Gerados por IA",value:a.ai_generated_count,color:"purple",icon:(0,r.jsx)(o.A,{className:"w-6 h-6"})})]})}),(0,r.jsx)("div",{className:"mb-8",children:(0,r.jsx)("div",{className:"bg-white shadow-lg border-0 rounded-xl",children:(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-gradient-to-r from-orange-500 to-red-500 rounded-xl flex items-center justify-center",children:(0,r.jsx)(u.A,{className:"w-5 h-5 text-white"})}),(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Buscar Manuais"})]}),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,r.jsxs)("div",{className:"flex-1 relative",children:[(0,r.jsx)(u.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,r.jsx)("input",{type:"text",placeholder:"Buscar por nome da marca ou descri\xe7\xe3o...",value:_,onChange:e=>E(e.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-all duration-200"})]}),(0,r.jsx)("div",{className:"flex gap-3",children:(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(x,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,r.jsxs)("select",{value:D,onChange:e=>S(e.target.value),className:"pl-10 pr-8 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 bg-white appearance-none",children:[(0,r.jsx)("option",{value:"all",children:"Todos os Status"}),(0,r.jsx)("option",{value:"draft",children:"Rascunhos"}),(0,r.jsx)("option",{value:"published",children:"Publicados"}),(0,r.jsx)("option",{value:"archived",children:"Arquivados"})]})]})})]})]})})}),(0,r.jsx)("div",{className:"space-y-8",children:t?(0,r.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"w-8 h-8 border-4 border-orange-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,r.jsx)("span",{className:"text-gray-600",children:"Carregando manuais..."})]})}):0===z.length?(0,r.jsx)("div",{className:"bg-white rounded-xl border border-gray-200 p-12",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"w-20 h-20 bg-gradient-to-r from-orange-500 to-red-500 rounded-2xl flex items-center justify-center mx-auto mb-6",children:(0,r.jsx)(h.A,{className:"w-10 h-10 text-white"})}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:_||"all"!==D?"Nenhum manual encontrado":"Ainda n\xe3o h\xe1 manuais"}),(0,r.jsx)("p",{className:"text-gray-600 mb-8 max-w-md mx-auto",children:_||"all"!==D?"Tente ajustar os filtros de busca para encontrar o que procura.":"Comece criando seu primeiro manual da marca para padronizar sua identidade visual."}),!_&&"all"===D&&(0,r.jsxs)("button",{onClick:()=>M(!0),className:"px-6 py-3 bg-gradient-to-r from-orange-500 to-red-500 text-white rounded-lg hover:from-orange-600 hover:to-red-600 inline-flex items-center gap-2 shadow-lg font-medium",children:[(0,r.jsx)(n.A,{className:"w-5 h-5"}),"Criar Primeiro Manual"]})]})}):(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:z.length===e.length?"Todos os Manuais (".concat(z.length,")"):"Resultados da Busca (".concat(z.length,")")}),(0,r.jsx)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:z.map(e=>(0,r.jsx)(w,{manual:e,onView:q,onEdit:B,onDuplicate:P,onDelete:R,onShare:H},e.id))})]})}),(0,r.jsx)(C,{isOpen:A,onClose:()=>M(!1),onCreateManual:L})]})})}},5515:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});let r=(0,t(7982).A)("ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]])},5842:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});let r=(0,t(7982).A)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},6296:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});let r=(0,t(7982).A)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},6309:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});let r=(0,t(7982).A)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},6414:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});let r=(0,t(7982).A)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},7310:(e,a,t)=>{"use strict";t.d(a,{R:()=>i});var r=t(1521),s=t(1945),l=t(3033);let n=e=>{let a=Array.isArray(e.chapters)?e.chapters:[];return{...e,chapters:a,brand_name:e.title||"Sem nome",status:"draft",creation_method:"manual",description:e.title,manual_data:{metadata:{brand:e.title||"Sem nome",version:"1.0",last_updated:e.updated_at,author:e.user_id},chapters:a.map((e,a)=>({id:e.id||"chapter-".concat(a+1),title:e.title||"Cap\xedtulo ".concat(a+1),completion_status:e.completion_status||"empty",...e}))}}},i=()=>{let[e,a]=(0,r.useState)([]),[t,i]=(0,r.useState)(null),[c,d]=(0,r.useState)(null),[o,u]=(0,r.useState)(!1),[m,x]=(0,r.useState)(!1),[h,p]=(0,r.useState)(null),{user:g}=(0,l.A)(),b=(0,s.LX)(),y=(0,r.useCallback)(async()=>{if(g){u(!0),p(null);try{console.log("\uD83D\uDCD8 useBrandManual: Carregando manuais da marca...");let e=await b.brandManuals.getAll(g.id);console.log("\uD83D\uDCD8 useBrandManual: Dados brutos recebidos:",e);let t=e.map((e,a)=>{console.log("\uD83D\uDCD8 useBrandManual: Adaptando manual ".concat(a,":"),e);let t=n(e);return console.log("\uD83D\uDCD8 useBrandManual: Manual adaptado ".concat(a,":"),t),t});a(t),console.log("\uD83D\uDCD8 useBrandManual: ".concat(t.length," manuais carregados"))}catch(e){p(e instanceof Error?e.message:"Erro ao carregar manuais"),console.error("âŒ Erro ao carregar manuais:",e)}finally{u(!1)}}},[g,b]),f=(0,r.useCallback)(async()=>{if(g)try{d(a=>({user_id:g.id,total_manuals:e.length,published_count:e.filter(e=>"published"===e.status).length,draft_count:e.filter(e=>"draft"===e.status).length,ai_generated_count:e.filter(e=>"ai_extraction"===e.creation_method).length,last_activity:new Date().toISOString()}))}catch(e){p(e instanceof Error?e.message:"Erro ao buscar estat\xedsticas")}},[g]),j=async e=>{if(!g)return p("Usu\xe1rio n\xe3o autenticado"),null;x(!0),p(null);try{let t={brand_id:"brand-".concat(Date.now()),user_id:g.id,title:e.brand_name,chapters:[]},r=await b.brandManuals.create(t),s=n(r);return a(e=>[s,...e]),s}catch(e){return p(e instanceof Error?e.message:"Erro ao criar manual"),null}finally{x(!1)}},v=async a=>{let t=e.find(e=>e.id===a);return t?await j({brand_name:"".concat(t.brand_name," (C\xf3pia)"),creation_method:"manual"}):null},N=async e=>{if(!g)return p("Usu\xe1rio n\xe3o autenticado"),!1;try{return await b.brandManuals.delete(e),a(a=>a.filter(a=>a.id!==e)),!0}catch(e){return p(e instanceof Error?e.message:"Erro ao deletar manual"),!1}},w=(0,r.useCallback)(async a=>{if(!g)return null;u(!0),p(null);try{let t=e.find(e=>e.id===a);if(t)return i(t),u(!1),t;await y();let r=(await new Promise(e=>{b.brandManuals.getAll(g.id).then(a=>{let t=a.map(e=>n(e));e(t)})})).find(e=>e.id===a);return r&&i(r),u(!1),r||null}catch(e){return p(e instanceof Error?e.message:"Erro ao buscar manual"),u(!1),null}},[g,e,y,b]),k=async e=>"".concat(window.location.origin,"/manual-marca/").concat(e),A=()=>p(null);return(0,r.useEffect)(()=>{g?("populateUserData"in b&&"function"==typeof b.populateUserData&&b.populateUserData(g.id),y()):(a([]),d(null))},[g]),(0,r.useEffect)(()=>{e.length>0&&f()},[e.length]),{manuals:e,currentManual:t,userStats:c,loading:o,creating:m,error:h,fetchUserManuals:y,fetchManual:w,getUserStats:f,createManual:j,duplicateManual:v,deleteManual:N,generateShareLink:k,resetError:A,clearError:A,setError:p}}},7521:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});let r=(0,t(7982).A)("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},7591:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});let r=(0,t(7982).A)("share",[["path",{d:"M12 2v13",key:"1km8f5"}],["path",{d:"m16 6-4-4-4 4",key:"13yo43"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}]])},7982:(e,a,t)=>{"use strict";t.d(a,{A:()=>c});var r=t(1521);let s=e=>{let a=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,a,t)=>t?t.toUpperCase():a.toLowerCase());return a.charAt(0).toUpperCase()+a.slice(1)},l=function(){for(var e=arguments.length,a=Array(e),t=0;t<e;t++)a[t]=arguments[t];return a.filter((e,a,t)=>!!e&&""!==e.trim()&&t.indexOf(e)===a).join(" ").trim()};var n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,r.forwardRef)((e,a)=>{let{color:t="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:c,className:d="",children:o,iconNode:u,...m}=e;return(0,r.createElement)("svg",{ref:a,...n,width:s,height:s,stroke:t,strokeWidth:c?24*Number(i)/Number(s):i,className:l("lucide",d),...!o&&!(e=>{for(let a in e)if(a.startsWith("aria-")||"role"===a||"title"===a)return!0})(m)&&{"aria-hidden":"true"},...m},[...u.map(e=>{let[a,t]=e;return(0,r.createElement)(a,t)}),...Array.isArray(o)?o:[o]])}),c=(e,a)=>{let t=(0,r.forwardRef)((t,n)=>{let{className:c,...d}=t;return(0,r.createElement)(i,{ref:n,iconNode:a,className:l("lucide-".concat(s(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),c),...d})});return t.displayName=s(e),t}},8676:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});let r=(0,t(7982).A)("book-open",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]])},9703:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});let r=(0,t(7982).A)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])}},e=>{e.O(0,[990,745,347,508,358],()=>e(e.s=3896)),_N_E=e.O()}]);