(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{627:(e,a,r)=>{"use strict";var s=r(7192);r.o(s,"usePathname")&&r.d(a,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(a,{useRouter:function(){return s.useRouter}})},846:(e,a,r)=>{"use strict";r.d(a,{N:()=>s});let s=(0,r(7990).UU)("https://scbwseltwscuplhnmcyu.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNjYndzZWx0d3NjdXBsaG5tY3l1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTMyODQ1MTYsImV4cCI6MjA2ODg2MDUxNn0.VgC2Oxx0-fjT2B4MljwxH_FUukBAP7TDGP4b50i-PEk",{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}})},2262:(e,a,r)=>{"use strict";r.d(a,{A:()=>s});let s=(0,r(7982).A)("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},2717:(e,a,r)=>{"use strict";r.d(a,{A:()=>s});let s=(0,r(7982).A)("target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]])},3033:(e,a,r)=>{"use strict";r.d(a,{A:()=>n});var s=r(1521),l=r(846),t=r(8912);let o=e=>{var a,r,s;return{id:e.id,email:e.email,name:(null==(a=e.user_metadata)?void 0:a.full_name)||(null==(r=e.user_metadata)?void 0:r.name),avatar:null==(s=e.user_metadata)?void 0:s.avatar_url}},n=()=>{let[e,a]=(0,s.useState)({user:null,loading:!0,error:null});(0,s.useEffect)(()=>{(async()=>{try{let{data:{session:e},error:r}=await l.N.auth.getSession();if(r){console.error("Erro ao verificar sess\xe3o:",r),a({user:null,loading:!1,error:r.message});return}(null==e?void 0:e.user)?a({user:o(e.user),loading:!1,error:null}):a(e=>({...e,loading:!1}))}catch(e){console.error("Erro ao verificar sess\xe3o:",e),a({user:null,loading:!1,error:"Erro ao verificar sess\xe3o"})}})();let{data:{subscription:e}}=l.N.auth.onAuthStateChange(async(e,r)=>{if(t.s.log("Auth state changed:",{event:e,session:r?"exists":"null"}),"SIGNED_IN"===e&&(null==r?void 0:r.user)){let e=o(r.user);a({user:e,loading:!1,error:null}),t.s.logUserState(!0,!1,e)}else if("SIGNED_OUT"===e)a({user:null,loading:!1,error:null}),t.s.logUserState(!1,!1,null);else if("TOKEN_REFRESHED"===e&&(null==r?void 0:r.user)){let e=o(r.user);a(a=>({...a,user:e,loading:!1}))}else r||a(e=>({user:null,loading:!1,error:null}))});return()=>{e.unsubscribe()}},[]);let r=async(e,r)=>{a(e=>({...e,loading:!0,error:null}));try{let{data:s,error:n}=await l.N.auth.signInWithPassword({email:e,password:r});if(n)return a({user:null,loading:!1,error:n.message}),{success:!1,error:n.message};if(s.user&&s.session){t.s.log("Login successful, updating state immediately");let e=o(s.user);return a({user:e,loading:!1,error:null}),{success:!0,user:e}}return a(e=>({...e,loading:!1})),{success:!1,error:"Dados de autentica\xe7\xe3o inv\xe1lidos"}}catch(r){let e=r instanceof Error?r.message:"Erro ao fazer login";return a({user:null,loading:!1,error:e}),{success:!1,error:e}}},n=async e=>{try{let{data:r,error:s}=await l.N.auth.signInWithOAuth({provider:e,options:{redirectTo:"".concat(window.location.origin,"/dashboard")}});if(s){let r=s.message||"Erro ao fazer login com ".concat(e);return a(e=>({...e,error:r})),{success:!1,error:r}}return{success:!0}}catch(s){let r=s instanceof Error?s.message:"Erro ao fazer login com ".concat(e);return a(e=>({...e,error:r})),{success:!1,error:r}}},i=async()=>{try{let{error:e}=await l.N.auth.signOut();if(e){let r=e.message||"Erro ao fazer logout";return a(e=>({...e,error:r})),{success:!1,error:r}}return a({user:null,loading:!1,error:null}),{success:!0}}catch(r){let e=r instanceof Error?r.message:"Erro ao fazer logout";return a(a=>({...a,error:e})),{success:!1,error:e}}};return{...e,signIn:r,signInWithProvider:n,signOut:i,isAuthenticated:!!e.user}}},3298:e=>{e.exports={style:{fontFamily:"'Lato', 'Lato Fallback'",fontWeight:400,fontStyle:"normal"},className:"__className_9940b2",variable:"__variable_9940b2"}},3899:(e,a,r)=>{Promise.resolve().then(r.bind(r,4582)),Promise.resolve().then(r.t.bind(r,9601,23)),Promise.resolve().then(r.t.bind(r,3298,23)),Promise.resolve().then(r.t.bind(r,6002,23))},4582:(e,a,r)=>{"use strict";r.d(a,{default:()=>w});var s=r(3365),l=r(627),t=r(1521),o=r(9534),n=r.n(o),i=r(7982);let c=(0,i.A)("layout-dashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);var u=r(2262),d=r(8676),h=r(7216),m=r(2717);let f=(0,i.A)("settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var g=r(7931);let y=(0,i.A)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]);var x=r(9188),v=r(3033);let p=[{name:"Dashboard",href:"/dashboard",icon:c},{name:"Anamnese Digital",href:"/anamnese-digital",icon:u.A},{name:"Manual da Marca",href:"/manual-marca",icon:d.A},{name:"Leads",href:"/leads",icon:h.A},{name:"Campanhas",href:"/campanhas",icon:m.A},{name:"Landing Pages",href:"/landing-pages",icon:u.A},{name:"Configura\xe7\xf5es",href:"/configuracoes",icon:f}],b=()=>{let e=(0,l.usePathname)(),a=(0,l.useRouter)(),{user:r,signOut:o}=(0,v.A)(),[i,c]=(0,t.useState)(!1);(0,t.useEffect)(()=>c(!0),[]);let u=async()=>{(await o()).success&&a.push("/login")},d=e=>{let{children:a}=e;return(0,s.jsx)("aside",{className:"w-64 h-screen max-h-screen bg-woof-dark-gray text-woof-white p-6 flex flex-col overflow-hidden",style:{backgroundColor:"#5a6872",width:"256px"},children:a})};return i?(0,s.jsxs)(d,{children:[(0,s.jsx)("div",{className:"mb-8 flex items-center justify-center",children:(0,s.jsx)(x.A,{sizeClass:"h-12"})}),(0,s.jsx)("nav",{className:"flex-grow overflow-y-auto pr-1",children:(0,s.jsx)("ul",{children:p.map(a=>{let r=e===a.href;return(0,s.jsx)("li",{className:"mb-2",children:(0,s.jsxs)(n(),{href:a.href,className:"flex items-center gap-3 py-2 px-4 rounded transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-woof-blue focus:ring-offset-woof-dark-gray ".concat(r?"bg-woof-blue/90 text-woof-dark-gray font-medium shadow":"hover:bg-woof-blue/20"),style:r?{backgroundColor:"#a4c2dc",color:"#5a6872"}:void 0,children:[(0,s.jsx)(a.icon,{size:20}),(0,s.jsx)("span",{children:a.name})]})},a.name)})})}),(0,s.jsxs)("div",{className:"mt-auto pt-6 space-y-4 border-t border-white/20",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-full mr-3 flex items-center justify-center",style:{backgroundColor:"#a4c2dc"},children:(null==r?void 0:r.avatar)?(0,s.jsx)("img",{src:r.avatar,alt:r.name||"Avatar",className:"w-full h-full object-cover rounded-full"}):(0,s.jsx)(g.A,{size:20,style:{color:"#5a6872"}})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("p",{className:"text-sm font-semibold truncate",children:(null==r?void 0:r.name)||(null==r?void 0:r.email)||"Usu\xe1rio"}),(0,s.jsx)("p",{className:"text-xs truncate text-white/70",children:(null==r?void 0:r.email)||"carregando..."})]})]}),(0,s.jsxs)("button",{onClick:u,className:"w-full font-medium px-4 py-2 rounded-lg flex items-center justify-center gap-2 transition-all duration-200 hover:shadow-lg",style:{backgroundColor:"#a4c2dc",color:"#5a6872"},children:[(0,s.jsx)(y,{size:16}),(0,s.jsx)("span",{children:"Sair"})]})]})]}):(0,s.jsxs)(d,{children:[(0,s.jsx)("div",{className:"mb-8 flex items-center justify-center",children:(0,s.jsx)("div",{className:"h-12 w-40 rounded bg-white/10 animate-pulse"})}),(0,s.jsx)("nav",{className:"flex-grow space-y-3 overflow-y-auto pr-1",children:Array.from({length:6}).map((e,a)=>(0,s.jsx)("div",{className:"h-10 rounded bg-white/10 animate-pulse"},a))}),(0,s.jsxs)("div",{className:"pt-6 border-t border-white/20 space-y-4",children:[(0,s.jsx)("div",{className:"h-10 w-full rounded bg-white/10 animate-pulse"}),(0,s.jsx)("div",{className:"h-10 w-full rounded bg-white/10 animate-pulse"})]})]})},w=e=>{let{children:a}=e,r=(0,l.usePathname)(),[o,n]=(0,t.useState)(!1);(0,t.useEffect)(()=>{n(!0)},[]);let i=!["/login","/cadastro"].includes(r);return(console.log("\uD83D\uDD0D ConditionalLayout - pathname:",r),console.log("\uD83D\uDD0D ConditionalLayout - shouldShowMenu:",i),console.log("\uD83D\uDD0D ConditionalLayout - isClient:",o),o&&i)?(0,s.jsxs)("div",{className:"flex h-screen max-h-screen overflow-hidden bg-light-gray",children:[(0,s.jsx)(b,{}),(0,s.jsx)("div",{className:"flex-1 flex flex-col h-full",children:(0,s.jsx)("main",{className:"flex-1 h-full overflow-y-auto px-6 py-6",children:a})})]}):(0,s.jsx)(s.Fragment,{children:a})}},6002:()=>{},7216:(e,a,r)=>{"use strict";r.d(a,{A:()=>s});let s=(0,r(7982).A)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},7931:(e,a,r)=>{"use strict";r.d(a,{A:()=>s});let s=(0,r(7982).A)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},8676:(e,a,r)=>{"use strict";r.d(a,{A:()=>s});let s=(0,r(7982).A)("book-open",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]])},8912:(e,a,r)=>{"use strict";r.d(a,{s:()=>s});let s={log:(e,a)=>{},logUserState:(e,a,r)=>{},logRedirect:(e,a,r)=>{}}},9188:(e,a,r)=>{"use strict";r.d(a,{A:()=>l});var s=r(3365);let l=e=>{let{sizeClass:a="h-8",white:r=!0}=e;return(0,s.jsx)("div",{className:"flex items-center",children:(0,s.jsx)("img",{src:"/images/logo.svg",alt:"Woof Digital",className:"".concat(a," w-auto ").concat(r?"brightness-0 invert":""),style:{maxWidth:"140px"}})})}},9601:e=>{e.exports={style:{fontFamily:"'Montserrat', 'Montserrat Fallback'",fontStyle:"normal"},className:"__className_66aebc",variable:"__variable_66aebc"}}},e=>{e.O(0,[165,990,301,347,508,358],()=>e(e.s=3899)),_N_E=e.O()}]);