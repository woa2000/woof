(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[328],{337:(e,a,s)=>{"use strict";s.d(a,{c:()=>r});var n=s(1521),t=s(1945),l=s(3033);let r=()=>{let[e,a]=(0,n.useState)([]),[r,o]=(0,n.useState)(!1),[c,i]=(0,n.useState)(!1),[d,u]=(0,n.useState)(null),{user:m}=(0,l.A)(),x=(0,t.LX)(),h=(0,n.useCallback)(async()=>{if(m){o(!0);try{let e=await x.anamneses.getAll(m.id);a(e)}catch(e){u(e instanceof Error?e.message:"Erro desconhecido")}finally{o(!1)}}},[m,x]),g=async e=>{if(!m)return null;try{return await x.anamneses.getByUrl(e,m.id)}catch(e){return console.error("Erro ao buscar anamnese:",e),null}},p=async function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];for(let e of["initializing","analyzing","processing","finalizing"])await new Promise(e=>setTimeout(e,800)),console.log("Processando est\xe1gio: ".concat(e));let{mockAnamneseVeterinary:n}=await Promise.resolve().then(s.bind(s,3209));return{...n,url_analisada:e,redes_sociais:a}},f=async function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!m)return u("Usu\xe1rio n\xe3o autenticado"),null;i(!0),u(null);try{let n=await p(e,s),t=await x.anamneses.create({...n,user_id:m.id});return a(e=>[t,...e]),t}catch(e){return u(e instanceof Error?e.message:"Erro ao processar an\xe1lise"),null}finally{i(!1)}},y=async function(e,s){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(!m)return u("Usu\xe1rio n\xe3o autenticado"),null;i(!0),u(null);try{let t=await p(s,n),l=await x.anamneses.update(e,t);return a(a=>a.map(a=>a.id===e?l:a)),l}catch(e){return u(e instanceof Error?e.message:"Erro ao reprocessar an\xe1lise"),null}finally{i(!1)}},D=async e=>{if(!m)return u("Usu\xe1rio n\xe3o autenticado"),!1;try{return await x.anamneses.delete(e),a(a=>a.filter(a=>a.id!==e)),!0}catch(e){return u(e instanceof Error?e.message:"Erro ao deletar anamnese"),!1}};return(0,n.useEffect)(()=>{m?("populateUserData"in x&&"function"==typeof x.populateUserData&&x.populateUserData(m.id),h()):a([])},[m,h,x]),{anamneses:e,loading:r,analyzing:c,error:d,fetchAnamneses:h,findByUrl:g,analyzeUrl:f,reprocessAnalysis:y,deleteAnamnese:D,processAnalysis:f,deleteAnalysis:D,clearError:()=>u(null),setError:u}}},7170:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>c});var n=s(3365),t=s(1521),l=s(1945),r=s(3033),o=s(337);function c(){let[e,a]=(0,t.useState)([]),[s,c]=(0,t.useState)({}),i=(0,l.LX)(),d=(0,l.Iv)(),{user:u}=(0,r.A)(),m=(0,o.c)(),x=e=>{let s=new Date().toLocaleTimeString();a(a=>[...a,"[".concat(s,"] ").concat(e)])},h=async()=>{x("\uD83E\uDDEA Iniciando testes do sistema de mocks...");try{if(x("\uD83D\uDCCA Provider Type: ".concat(d.type)),x("\uD83D\uDD27 Mock Data Enabled: ".concat(d.mockDataEnabled)),x("\uD83E\uDD16 Mock AI Enabled: ".concat(d.mockAiEnabled)),u){x("\uD83D\uDC64 Usu\xe1rio logado: ".concat(u.email," (ID: ").concat(u.id.slice(0,8),"...)")),"populateUserData"in i&&"function"==typeof i.populateUserData?(x("\uD83D\uDCDD Populando dados mock para usu\xe1rio..."),i.populateUserData(u.id),x("✅ Dados mock populados")):x("⚠️ M\xe9todo populateUserData n\xe3o dispon\xedvel no provider"),x("\uD83D\uDD0D Buscando anamneses via DataProvider...");let e=await i.anamneses.getAll(u.id);x("\uD83D\uDCC4 Anamneses encontradas: ".concat(e.length)),c(a=>({...a,anamneses:e.length,anamneseData:e[0]?{id:e[0].id,url:e[0].url_analisada,status:e[0].status}:null})),x("\uD83C\uDFAF Hook anamneses count: ".concat(m.anamneses.length)),x("\uD83D\uDD04 Hook loading: ".concat(m.loading)),x("❌ Hook error: ".concat(m.error||"none"))}else x("❌ Usu\xe1rio n\xe3o logado");x("✅ Testes conclu\xeddos")}catch(e){x("❌ Erro durante os testes: ".concat(e instanceof Error?e.message:"Erro desconhecido"))}},g=async()=>{if(!u)return void x("❌ N\xe3o \xe9 poss\xedvel testar an\xe1lise sem usu\xe1rio logado");x("\uD83D\uDD2C Testando an\xe1lise de URL...");try{let e=await m.analyzeUrl("https://test-vet-clinic.com.br",["@test_vet"]);e?(x("✅ An\xe1lise criada: ".concat(e.id)),x("\uD83D\uDCCA URL analisada: ".concat(e.url_analisada)),x("⭐ Score geral: ".concat(e.overall_score||"N/A")),c(a=>({...a,newAnalysis:{id:e.id,url:e.url_analisada,score:e.overall_score}}))):x("❌ Falha na cria\xe7\xe3o da an\xe1lise")}catch(e){x("❌ Erro na an\xe1lise: ".concat(e instanceof Error?e.message:"Erro desconhecido"))}};return(0,t.useEffect)(()=>{u&&setTimeout(h,1e3)},[u]),(0,n.jsx)("div",{className:"min-h-screen bg-gray-50 p-6",children:(0,n.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,n.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[(0,n.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"\uD83E\uDDEA Sistema de Testes - Mocks Debug"}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsx)("h2",{className:"text-lg font-semibold text-gray-800",children:"Informa\xe7\xf5es do Sistema"}),(0,n.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{className:"text-gray-600",children:"Environment:"}),(0,n.jsx)("span",{className:"font-mono",children:d.environment})]}),(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{className:"text-gray-600",children:"Provider Type:"}),(0,n.jsx)("span",{className:"font-mono ".concat("mock"===d.type?"text-green-600":"text-blue-600"),children:d.type})]}),(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{className:"text-gray-600",children:"Mock Data:"}),(0,n.jsx)("span",{className:"font-mono ".concat(d.mockDataEnabled?"text-green-600":"text-red-600"),children:d.mockDataEnabled?"Enabled":"Disabled"})]}),(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{className:"text-gray-600",children:"User Status:"}),(0,n.jsx)("span",{className:"font-mono ".concat(u?"text-green-600":"text-red-600"),children:u?"Authenticated":"Not authenticated"})]})]})]}),(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsx)("h2",{className:"text-lg font-semibold text-gray-800",children:"Resultados dos Testes"}),(0,n.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{className:"text-gray-600",children:"Anamneses Carregadas:"}),(0,n.jsx)("span",{className:"font-mono text-blue-600",children:s.anamneses||0})]}),(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{className:"text-gray-600",children:"Hook Anamneses:"}),(0,n.jsx)("span",{className:"font-mono text-purple-600",children:m.anamneses.length})]}),(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{className:"text-gray-600",children:"Hook Loading:"}),(0,n.jsx)("span",{className:"font-mono ".concat(m.loading?"text-orange-600":"text-gray-400"),children:m.loading?"true":"false"})]}),(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{className:"text-gray-600",children:"Hook Error:"}),(0,n.jsx)("span",{className:"font-mono ".concat(m.error?"text-red-600":"text-gray-400"),children:m.error?"Yes":"None"})]})]})]})]}),(0,n.jsxs)("div",{className:"mt-6 flex space-x-4",children:[(0,n.jsx)("button",{onClick:h,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition-colors",children:"\uD83D\uDD04 Executar Testes"}),(0,n.jsx)("button",{onClick:g,disabled:!u||m.analyzing,className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:m.analyzing?"⏳ Analisando...":"\uD83D\uDD2C Testar An\xe1lise"}),(0,n.jsx)("button",{onClick:()=>a([]),className:"bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700 transition-colors",children:"\uD83D\uDDD1️ Limpar Logs"})]})]}),(0,n.jsxs)("div",{className:"bg-black text-green-400 rounded-lg p-4 font-mono text-sm",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,n.jsx)("h3",{className:"text-white font-bold",children:"\uD83D\uDCCA Logs do Sistema"}),(0,n.jsxs)("span",{className:"text-gray-400 text-xs",children:[e.length," entradas"]})]}),(0,n.jsx)("div",{className:"h-96 overflow-y-auto space-y-1",children:0===e.length?(0,n.jsx)("div",{className:"text-gray-500",children:"Aguardando logs..."}):e.map((e,a)=>(0,n.jsx)("div",{className:"leading-relaxed",children:e},a))})]}),s.anamneseData&&(0,n.jsxs)("div",{className:"mt-6 bg-white rounded-lg shadow p-6",children:[(0,n.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"\uD83D\uDD0D Dados de Exemplo (Primeira Anamnese)"}),(0,n.jsx)("pre",{className:"bg-gray-100 p-4 rounded text-xs overflow-auto",children:JSON.stringify(s.anamneseData,null,2)})]})]})})}},8606:(e,a,s)=>{Promise.resolve().then(s.bind(s,7170))}},e=>{e.O(0,[990,745,347,508,358],()=>e(e.s=8606)),_N_E=e.O()}]);