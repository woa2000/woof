"use strict";exports.id=257,exports.ids=[257],exports.modules={5818:(a,b,c)=>{c.d(b,{A:()=>d});let d=(0,c(33922).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},18516:(a,b,c)=>{c.d(b,{F_:()=>g,ih:()=>f});var d=c(39184);async function e(){try{let{data:a,error:b}=await d.N.storage.from("brand-assets").list("",{limit:1});if(!b)return console.log("✅ Bucket brand-assets est\xe1 dispon\xedvel"),!0;console.log("⚠️  Bucket brand-assets n\xe3o encontrado");let{data:c,error:e}=await d.N.storage.listBuckets();if(e)throw console.error("❌ Erro ao acessar storage:",e.message),Error(`Erro de acesso ao storage: ${e.message}`);if(!c?.some(a=>"brand-assets"===a.id)){console.log("\uD83D\uDD27 Tentando criar bucket brand-assets...");let{error:a}=await d.N.storage.createBucket("brand-assets",{public:!0,allowedMimeTypes:["image/png","image/jpeg","image/svg+xml","application/pdf"],fileSizeLimit:0xa00000});if(a)throw console.error("❌ Erro ao criar bucket:",a.message),Error(`Bucket n\xe3o existe e n\xe3o foi poss\xedvel criar automaticamente. 
        
🔧 SOLU\xc7\xc3O MANUAL:
1. Acesse o painel do Supabase: https://supabase.com/dashboard
2. V\xe1 em Storage > Buckets
3. Clique em "New bucket"
4. Nome: brand-assets
5. Marque como "Public bucket"
6. Confirme e tente novamente

Erro t\xe9cnico: ${a.message}`);console.log("✅ Bucket brand-assets criado com sucesso")}return!0}catch(a){throw console.error("❌ Erro na configura\xe7\xe3o do bucket:",a),a instanceof Error?a:Error("Erro desconhecido na configura\xe7\xe3o do storage")}}async function f(a,b){try{console.log("\uD83D\uDE80 Iniciando upload do logo...",{fileName:a.name,version:b}),console.log("\uD83D\uDCE6 Verificando bucket..."),await e();let c=Date.now(),f=a.name.split(".").pop(),g=`${b}_${c}.${f}`,h=`brand-manuals/logos/${g}`;console.log("⬆️  Fazendo upload...",{filePath:h});let{data:i,error:j}=await d.N.storage.from("brand-assets").upload(h,a,{cacheControl:"3600",upsert:!1});if(j){if(console.error("❌ Erro no upload:",j),j.message.includes("new row violates row-level security policy"))throw Error(`Erro de permiss\xe3o no storage. 
        
🔧 POSS\xcdVEIS SOLU\xc7\xd5ES:
1. Fa\xe7a login no sistema antes de fazer upload
2. Verifique se o bucket est\xe1 configurado corretamente
3. Execute o SQL de configura\xe7\xe3o: sql/storage_setup.sql

Erro t\xe9cnico: ${j.message}`);if(j.message.includes("The bucket does not exist"))throw Error(`Bucket de storage n\xe3o existe.
        
🔧 SOLU\xc7\xc3O:
1. Acesse https://supabase.com/dashboard
2. V\xe1 em Storage > Buckets  
3. Crie um bucket chamado "brand-assets"
4. Marque como p\xfablico
5. Tente novamente

Erro t\xe9cnico: ${j.message}`);throw Error(`Erro no upload: ${j.message}`)}console.log("✅ Upload conclu\xeddo!",i);let{data:k}=d.N.storage.from("brand-assets").getPublicUrl(h),l={success:!0,data:{file_url:k.publicUrl,storage_path:h,file_name:a.name,format:f?.toUpperCase()||"UNKNOWN",size_bytes:a.size}};return console.log("\uD83C\uDF89 Upload finalizado com sucesso!",l),l}catch(a){return console.error("\uD83D\uDCA5 Erro no upload:",a),{success:!1,error:a instanceof Error?a.message:"Erro desconhecido no upload"}}}async function g(a){try{let{error:b}=await d.N.storage.from("brand-assets").remove([a]);if(b)throw b;return{success:!0}}catch(a){return console.error("Erro ao remover arquivo:",a),{success:!1,error:a instanceof Error?a.message:"Erro desconhecido"}}}},57387:(a,b,c)=>{c.d(b,{A:()=>e});var d=c(28625);let e=({variant:a="primary",icon:b,children:c,className:e,...f})=>(0,d.jsxs)("button",{className:`px-4 py-3 rounded-lg flex items-center justify-center font-medium transition-all duration-200 min-h-[44px] ${{primary:"text-white hover:opacity-90 shadow-md hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",secondary:"bg-gray-100 text-gray-800 hover:bg-gray-200 border border-gray-300"}[a]} ${e||""}`,style:"primary"===a?{backgroundColor:"#FF6B00"}:void 0,...f,children:[b&&(0,d.jsx)(b,{size:18,className:"mr-2"}),c]})},79257:(a,b,c)=>{c.d(b,{A:()=>l});var d=c(28625),e=c(64996),f=c(79344);let g=(0,c(33922).A)("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);var h=c(5818),i=c(99741),j=c(57387),k=c(18516);function l({isOpen:a,onClose:b,onLogoAdded:c}){let[l,m]=(0,e.useState)(null),[n,o]=(0,e.useState)(""),[p,q]=(0,e.useState)(""),[r,s]=(0,e.useState)(!1),[t,u]=(0,e.useState)(!1),v=n&&!r,w=l&&n&&!r,x=a=>["image/svg+xml","image/png","image/jpeg","image/jpg","application/pdf"].includes(a.type)?a.size>0xa00000?void alert("Arquivo muito grande. O tamanho m\xe1ximo \xe9 10MB."):void(console.log("\uD83D\uDCC1 Arquivo selecionado:",a.name),m(a)):void alert("Tipo de arquivo n\xe3o permitido. Use SVG, PNG, JPG ou PDF."),y=async()=>{if(l&&n){s(!0);try{console.log("\uD83D\uDE80 Iniciando upload...",{file:l.name,version:n});let a=await (0,k.ih)(l,n);if(!a.success){let b="error"in a?a.error:"Dados inv\xe1lidos";b.includes("Bucket n\xe3o existe")?alert(`❌ Erro de configura\xe7\xe3o do storage!

🔧 SOLU\xc7\xc3O:
1. O bucket precisa ser criado no painel do Supabase
2. Consulte o arquivo SOLUCAO_UPLOAD_LOGO.md
3. Ou execute: npm run setup-storage

Erro: ${b}`):b.includes("permiss\xe3o")||b.includes("row-level security")?alert(`❌ Erro de permiss\xe3o!

🔧 POSS\xcdVEIS CAUSAS:
1. Voc\xea precisa estar logado na aplica\xe7\xe3o
2. O storage n\xe3o est\xe1 configurado corretamente
3. Pol\xedticas de seguran\xe7a n\xe3o foram aplicadas

Consulte SOLUCAO_UPLOAD_LOGO.md para detalhes.

Erro: ${b}`):alert(`❌ Erro no upload: ${b}

💡 Se o problema persistir, consulte SOLUCAO_UPLOAD_LOGO.md`);return}if(!("data"in a)||!a.data)return void alert("❌ Erro: Dados de upload inv\xe1lidos");console.log("✅ Upload conclu\xeddo com sucesso!",a.data);let d={version:n,file_url:a.data.file_url,file_name:a.data.file_name,format:a.data.format,uploaded_at:new Date().toISOString(),size_bytes:a.data.size_bytes,application_notes:p||void 0,storage_path:a.data.storage_path};console.log("\uD83C\uDF89 Adicionando logo \xe0 lista...",d),c(d),m(null),o(""),q(""),b()}catch(b){console.error("\uD83D\uDCA5 Erro inesperado no upload:",b);let a=b instanceof Error?b.message:"Erro desconhecido";alert(`❌ Erro inesperado durante o upload.

Detalhes: ${a}

💡 Verifique:
1. Se voc\xea est\xe1 logado na aplica\xe7\xe3o
2. Se o storage est\xe1 configurado (SOLUCAO_UPLOAD_LOGO.md)
3. Se o arquivo \xe9 v\xe1lido

Tente novamente ou consulte a documenta\xe7\xe3o.`)}finally{s(!1)}}},z=a=>{a.preventDefault(),a.stopPropagation(),"dragenter"===a.type||"dragover"===a.type?u(!0):"dragleave"===a.type&&u(!1)};return a?(0,d.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,d.jsxs)("div",{className:"bg-white rounded-lg max-w-md w-full mx-4 max-h-[90vh] overflow-y-auto",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,d.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Adicionar Logotipo"}),(0,d.jsx)("button",{onClick:b,disabled:r,className:"text-gray-400 hover:text-gray-600 disabled:opacity-50",children:(0,d.jsx)(h.A,{className:"w-6 h-6"})})]}),(0,d.jsxs)("div",{className:"p-6 space-y-6",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Vers\xe3o do Logo *"}),(0,d.jsxs)("select",{value:n,onChange:a=>o(a.target.value),disabled:r,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:opacity-50",children:[(0,d.jsx)("option",{value:"",children:"Selecione uma vers\xe3o..."}),[{value:"principal_colorida",label:"Principal Colorida"},{value:"monocromatica_preta",label:"Monocrom\xe1tica Preta"},{value:"monocromatica_branca",label:"Monocrom\xe1tica Branca"},{value:"escala_cinza",label:"Escala de Cinza"}].map(a=>(0,d.jsx)("option",{value:a.value,children:a.label},a.value))]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Arquivo do Logo *"}),l?(0,d.jsxs)("div",{className:"border border-gray-300 rounded-lg p-4",children:[(0,d.jsxs)("div",{className:"flex items-center space-x-3",children:[(()=>{var a;let b=(a=l.name,"pdf"===a.split(".").pop()?.toLowerCase()?f.A:g);return(0,d.jsx)(b,{className:"w-8 h-8 text-blue-500"})})(),(0,d.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,d.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:l.name}),(0,d.jsx)("p",{className:"text-xs text-gray-500",children:(a=>{if(0===a)return"0 Bytes";let b=Math.floor(Math.log(a)/Math.log(1024));return parseFloat((a/Math.pow(1024,b)).toFixed(1))+" "+["Bytes","KB","MB"][b]})(l.size)})]}),(0,d.jsx)("button",{onClick:()=>{m(null)},disabled:r,className:"text-gray-400 hover:text-gray-600 disabled:opacity-50",children:(0,d.jsx)(h.A,{className:"w-5 h-5"})})]}),(0,d.jsx)("button",{onClick:()=>document.getElementById("file-input")?.click(),disabled:r,className:"mt-3 text-sm text-blue-600 hover:text-blue-700 disabled:opacity-50",children:"Selecionar outro arquivo"})]}):(0,d.jsxs)("div",{className:`relative border-2 border-dashed rounded-lg p-6 text-center transition-colors ${t?"border-blue-400 bg-blue-50":v?"border-gray-300 hover:border-gray-400":"border-gray-200 bg-gray-50"}`,onDragEnter:z,onDragLeave:z,onDragOver:z,onDrop:a=>{if(a.preventDefault(),a.stopPropagation(),u(!1),!v)return;let b=a.dataTransfer.files?.[0];b&&x(b)},children:[(0,d.jsx)(i.A,{className:`w-8 h-8 mx-auto mb-3 ${v?"text-gray-400":"text-gray-300"}`}),(0,d.jsx)("p",{className:`text-sm ${v?"text-gray-600":"text-gray-400"}`,children:v?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("span",{className:"font-medium",children:"Clique para selecionar"})," ou arraste o arquivo aqui"]}):"Selecione uma vers\xe3o primeiro"}),(0,d.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"SVG, PNG, JPG ou PDF at\xe9 10MB"}),(0,d.jsx)("input",{id:"file-input",type:"file",accept:".svg,.png,.jpg,.jpeg,.pdf",onChange:a=>{let b=a.target.files?.[0];b&&x(b)},disabled:!v,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer disabled:cursor-not-allowed"})]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notas de Aplica\xe7\xe3o (opcional)"}),(0,d.jsx)("textarea",{value:p,onChange:a=>q(a.target.value),disabled:r,placeholder:"Ex: Use apenas em fundos claros, mantenha propor\xe7\xe3o...",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:opacity-50"})]})]}),(0,d.jsxs)("div",{className:"flex items-center justify-end gap-3 p-6 border-t border-gray-200",children:[(0,d.jsx)(j.A,{onClick:b,variant:"secondary",disabled:r,children:"Cancelar"}),(0,d.jsx)(j.A,{onClick:y,disabled:!w,children:r?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Fazendo Upload..."]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(i.A,{className:"w-4 h-4 mr-2"}),"Fazer Upload"]})})]})]})}):null}},99741:(a,b,c)=>{c.d(b,{A:()=>d});let d=(0,c(33922).A)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]])}};